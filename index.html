<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>STEMANACE | Neural Calibrator</title>

<!-- Kill favicon errors -->
<link rel="icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAB">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&family=JetBrains+Mono:wght@500;800&display=swap" rel="stylesheet">

<!-- MathJax v3 SAFE CONFIG -->
<script>
window.MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']],
    displayMath: [['$$', '$$']]
  },
  options: { enableMenu: false },
  chtml: { displayAlign: 'center' }
};
</script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" async></script>

<link rel="stylesheet" href="style.css">
</head>

<body>

<div class="scanlines"></div>

<div class="app-container">

<!-- SIDEBAR -->
<aside class="sidebar">
  <h1 class="logo">STEM<span>ANACE</span></h1>

  <div class="surface-card">
    <div class="stat-label">SYSTEM_PEAK</div>
    <div id="high-score" class="stat-value">0</div>
  </div>

  <div class="surface-card">
    <div class="stat-label">PROFICIENCY</div>
    <div id="global-proficiency" class="stat-value">0%</div>
  </div>

  <div class="surface-card">
    <div class="stat-label">ACHIEVEMENTS</div>
    <div id="achievement-rack" class="achievement-grid"></div>
  </div>

  <!-- Hidden hooks -->
  <div id="total-drills" hidden>0</div>
  <div id="display-callsign" hidden></div>
</aside>

<!-- MAIN -->
<main class="main-stage">

<!-- LOGIN -->
<div id="screen-login" class="screen">
  <h2 class="stat-label">IDENTITY_VERIFICATION</h2>
  <input id="callsign-input" class="neural-input" placeholder="ENTER_OPERATOR_NAME">
  <button class="primary-btn" onclick="submitLogin()">INITIALIZE</button>
</div>

<!-- HOME -->
<div id="screen-home" class="screen hidden">
  <h2 class="stat-label">RANK_STATUS</h2>
  <div id="current-rank" class="stat-value highlight">CONSTANT</div>

  <button class="primary-btn" onclick="showScreen('screen-game')">ENTER ARENA</button>
</div>

<!-- GAME -->
<div id="screen-game" class="screen hidden">
  <div class="arena-hud">
    <div class="hud-item">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
    <div class="hud-item">STREAK: <span id="streak">0</span></div>
  </div>

  <div class="timer-rail"><div id="timer-fill"></div></div>

  <div id="formula-chamber">
    <div id="formula-display">$$x^2 + y^2$$</div>
  </div>

  <div class="grid-2x2">
    <button class="opt-btn">A</button>
    <button class="opt-btn">B</button>
    <button class="opt-btn">C</button>
    <button class="opt-btn">D</button>
  </div>
</div>

</main>
</div>

<!-- SAFE SCRIPT -->
<script>
document.addEventListener("DOMContentLoaded", () => {

  function $(id) {
    return document.getElementById(id);
  }

  window.showScreen = function(id) {
    document.querySelectorAll(".screen").forEach(s => s.classList.add("hidden"));
    const target = $(id);
    if (target) target.classList.remove("hidden");
  };

  window.submitLogin = function () {
    const input = $("callsign-input");
    if (!input || !input.value.trim()) return;

    $("display-callsign").textContent = input.value.trim();
    showScreen("screen-home");
    updateHomeDashboard();
  };

  function updateHomeDashboard() {
    if ($("high-score")) $("high-score").textContent = "42";
    if ($("global-proficiency")) $("global-proficiency").textContent = "73%";
    if ($("current-rank")) $("current-rank").textContent = "VECTOR";

    const rack = $("achievement-rack");
    if (rack) rack.innerHTML = "üèÖ üèÖ üèÖ";
  }

});
</script>

</body>
</html>
